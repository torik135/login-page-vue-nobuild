<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>
    <!-- TODO: import style.css -->
    <link rel="stylesheet" type="text/css" href="assets/css/styles.css" />
    <!-- TODO: import vuejs cdn -->
    <script src="assets/js/vue.global.min.js"></script>
  </head>
  <body>
    <div id="app" class="container">
      <header>
        <h2>{{ header }}</h2>
      </header>
      <main>
        <form>
          <div class="form-container">
            <input
              type="email"
              name="email"
              id="email"
              placeholder="email address"
              required
            />

            <div class="pass-container">
              <!-- if showPass is true then type input is text -->

              <input
                v-if="showPass"
                type="text"
                name="password"
                id="password"
                placeholder="your password"
                v-model="passVal"
                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                title="Password must be chars"
                required
              />

              <!-- if showPass is false then type input is password -->
              <input
                v-else
                type="password"
                name="password"
                id="password"
                placeholder="your password"
                v-model="passVal"
                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                required
              />
              <span @click="showPassMethod()">{{ showPass ? 'H' : 'S' }}</span>
            </div>

            <!-- 
              warning if password param is incorrect
                8 char or more.
                combination of number, string and special char.
                cannot be empty.
            -->
            <div id="warning-pass">
              <p
                v-show="showWarnLetterUpper"
                id="warn-letter"
                class="invalid-pass"
              >
                {{ warnLetterUpperText }}
              </p>
              <p
                v-show="showWarnLetterLower"
                id="warn-letter"
                class="invalid-pass"
              >
                {{ warnLetterLowerText }}
              </p>
              <p v-show="showWarnNum" id="warn-number" class="invalid-pass">
                {{ warnNumText }}
              </p>
              <p v-show="showWarnLength" id="warn-length" class="invalid-pass">
                {{ warnLengthText }}
              </p>
              <p v-show="showWarnSpecial" id="warn-length" class="invalid-pass">
                {{ warnSpecialText }}
              </p>
            </div>
            <button type="submit">Login</button>
          </div>
        </form>
      </main>
    </div>

    <script>
      const { createApp } = Vue;

      const app = createApp({
        data() {
          return {
            header: "Login Page",
            showPass: false,
            passVal: null,
            // warn letter uppercase
            showWarnLetterUpper: false,
            warnLetterUpperText: null,
            // warn letter lowercase
            showWarnLetterLower: false,
            warnLetterLowerText: null,
            // warn number
            showWarnNum: false,
            warnNumText: null,
            // warn length
            showWarnLength: false,
            warnLengthText: null,
            // warn special
            showWarnSpecial: false,
            warnSpecialText: null,
          };
        },

        watch: {
          passVal(val) {
            let numVal = /[0-9]/g;
            let letterValLower = /[a-z]/g;
            let letterValUpper = /[A-Z]/g;
            let specialVal = /[^a-zA-Z0-9_]/g;

            // if pass val is less than 8
            if (val.length <= 8) {
              this.showWarnLength = true;
              this.warnLengthText = "Password must be 8 characters or more.";
            } else {
              this.showWarnLength = false;
              this.warnLengthText = null;
            }

            // if pass val has no number
            if (!val.match(numVal)) {
              this.showWarnNum = true;
              this.warnNumText = "Password at least have 1 number.";
            } else {
              this.showWarnNum = false;
              this.warnNumText = null;
            }

            // if pass val has no letter (UPPER)
            if (!val.match(letterValUpper)) {
              this.showWarnLetterUpper = true;
              this.warnLetterUpperText =
                "Password at least have 1 uppercase letter.";
            } else {
              this.showWarnLetterUpper = false;
              this.warnLetterUpperText = null;
            }

            // if pass val has no letter (LOWER)
            if (!val.match(letterValLower)) {
              this.showWarnLetterLower = true;
              this.warnLetterLowerText =
                "Password at least have 1 lowercase letter.";
            } else {
              this.showWarnLetterLower = false;
              this.warnLetterLowerText = null;
            }

            // if pass val has no special char
            if (!val.match(specialVal)) {
              this.showWarnSpecial = true;
              this.warnSpecialText =
                "Password at least have 1 special character.";
            } else {
              this.showWarnSpecial = false;
              this.warnSpecialText = null;
            }
          },
        },

        methods: {
          showPassMethod() {
            this.showPass = !this.showPass;
          },
        },
      });

      app.mount("#app");
    </script>
  </body>
</html>
